# ç¬”è®°å¯¼å‡ºåŠŸèƒ½å®žçŽ°æ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

æˆåŠŸä½¿ç”¨ **TDD (æµ‹è¯•é©±åŠ¨å¼€å‘)** å·¥ä½œæµå®žçŽ°äº†ç¬”è®°å¯¼å‡ºåŠŸèƒ½ï¼

### æ ¸å¿ƒåŠŸèƒ½
1. âœ… **å•ç¬”è®°å¯¼å‡º** - åœ¨ç¬”è®°é¢„è§ˆåŒºåŸŸæ·»åŠ "å¯¼å‡º"æŒ‰é’®
2. âœ… **å…¨é‡å¯¼å‡º** - åœ¨é¡µé¢é¡¶éƒ¨æ·»åŠ "å¯¼å‡ºå…¨éƒ¨"æŒ‰é’®
3. âœ… **Markdown æ ¼å¼** - åŒ…å«æ ‡é¢˜ã€å†…å®¹ã€æ ‡ç­¾ã€åˆ†éš”çº¿
4. âœ… **å‰ªè´´æ¿å¤åˆ¶** - ä¸€é”®å¤åˆ¶åˆ°å‰ªè´´æ¿
5. âœ… **Toast é€šçŸ¥** - æˆåŠŸ/å¤±è´¥çš„ç”¨æˆ·åé¦ˆ

## ðŸ”„ TDD å·¥ä½œæµ

### ðŸ”´ RED é˜¶æ®µ - ç¼–å†™å¤±è´¥çš„æµ‹è¯•
- åˆ›å»ºäº† 11 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰åœºæ™¯
- æµ‹è¯•å…¨éƒ¨å¤±è´¥ï¼ˆå› ä¸ºä»£ç è¿˜ä¸å­˜åœ¨ï¼‰

### ðŸŸ¢ GREEN é˜¶æ®µ - æœ€å°åŒ–å®žçŽ°
- å®žçŽ°äº† `exportNoteAsMarkdown()` å‡½æ•°
- å®žçŽ°äº† `exportNotesAsMarkdown()` å‡½æ•°
- å®žçŽ°äº† `copyToClipboard()` å‡½æ•°
- æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼âœ…

### â™»ï¸ REFACTOR é˜¶æ®µ - ä»£ç æ”¹è¿›
- æ·»åŠ äº† JSDoc æ–‡æ¡£æ³¨é‡Š
- ä¼˜åŒ–äº† TypeScript ç±»åž‹
- é›†æˆäº† Toast é€šçŸ¥ç³»ç»Ÿ
- æ›´æ–°äº† UI ç»„ä»¶

## ðŸ“Š æµ‹è¯•è¦†ç›–çŽ‡

```
Test Suites: 1 passed, 1 total
Tests:       11 passed, 11 total
Coverage:    100% on note-export utilities
```

### æµ‹è¯•åœºæ™¯
- âœ… å¸¦æ ‡ç­¾çš„ç¬”è®°å¯¼å‡º
- âœ… ä¸å¸¦æ ‡ç­¾çš„ç¬”è®°å¯¼å‡º
- âœ… ç©ºå†…å®¹çš„ç¬”è®°å¯¼å‡º
- âœ… å¤šä¸ªç¬”è®°å¯¼å‡ºï¼ˆå¸¦åˆ†éš”çº¿ï¼‰
- âœ… ç©ºæ•°ç»„å¤„ç†
- âœ… å‰ªè´´æ¿æˆåŠŸå¤åˆ¶
- âœ… å‰ªè´´æ¿é”™è¯¯å¤„ç†

## ðŸ“ æ–‡ä»¶ç»“æž„

### æ–°å»ºæ–‡ä»¶
```
lib/utils/
  â”œâ”€â”€ note-export.ts           # å¯¼å‡ºå·¥å…·å‡½æ•°
  â””â”€â”€ __tests__/
      â””â”€â”€ note-export.test.ts  # æµ‹è¯•å¥—ä»¶

hooks/
  â””â”€â”€ use-toast.ts             # Toast é€šçŸ¥ hook

components/ui/
  â””â”€â”€ toast.tsx                # Toast UI ç»„ä»¶

jest.config.js                 # Jest é…ç½®
jest.setup.js                  # Jest åˆå§‹åŒ–
```

### ä¿®æ”¹æ–‡ä»¶
```
components/notes/NoteList.tsx  # æ·»åŠ å¯¼å‡ºæŒ‰é’®å’Œå¤„ç†å‡½æ•°
app/layout.tsx                 # é›†æˆ Toaster ç»„ä»¶
package.json                   # æ·»åŠ æµ‹è¯•ä¾èµ–å’Œè„šæœ¬
```

## ðŸŽ¯ å¯¼å‡ºæ ¼å¼ç¤ºä¾‹

### å•ç¬”è®°å¯¼å‡º
```markdown
# ç¬”è®°æ ‡é¢˜

ç¬”è®°å†…å®¹...

**æ ‡ç­¾**ï¼š#æ ‡ç­¾1 #æ ‡ç­¾2
```

### å¤šç¬”è®°å¯¼å‡º
```markdown
# ç¬”è®°1

å†…å®¹1...

**æ ‡ç­¾**ï¼š#å·¥ä½œ #é‡è¦

---

# ç¬”è®°2

å†…å®¹2...

**æ ‡ç­¾**ï¼š#å¾…åŠž
```

## ðŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯¼å‡ºå½“å‰ç¬”è®°
1. åœ¨ç¬”è®°åˆ—è¡¨ä¸­ç‚¹å‡»ä»»æ„ç¬”è®°é€‰ä¸­
2. åœ¨å³ä¾§é¢„è§ˆåŒºåŸŸç‚¹å‡»"å¯¼å‡º"æŒ‰é’®
3. ç¬”è®°ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
4. çœ‹åˆ°"å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"æç¤º

### 2. å¯¼å‡ºæ‰€æœ‰ç¬”è®°
1. ç‚¹å‡»é¡µé¢é¡¶éƒ¨çš„"å¯¼å‡ºå…¨éƒ¨"æŒ‰é’®
2. æ‰€æœ‰ç¬”è®°ä¼šåˆå¹¶ä¸º Markdown æ ¼å¼
3. è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
4. çœ‹åˆ°"å·²å¯¼å‡º X æ¡ç¬”è®°åˆ°å‰ªè´´æ¿"æç¤º

## ðŸ”§ æŠ€æœ¯æ ˆ

- **æµ‹è¯•æ¡†æž¶**: Jest + React Testing Library
- **è¯­è¨€**: TypeScript
- **UI**: Radix UI + Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ ¼å¼**: Markdown

## ðŸ“¦ ä¾èµ–å®‰è£…

```bash
npm install --save-dev jest @testing-library/react @testing-library/jest-dom @testing-library/user-event jest-environment-jsdom @types/jest
```

## ðŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•
npm test -- lib/utils/__tests__/note-export.test.ts

# ç›‘è§†æ¨¡å¼
npm run test:watch

# ç”Ÿæˆè¦†ç›–çŽ‡æŠ¥å‘Š
npm run test:coverage
```

## ðŸŽ¨ UI æ”¹è¿›

### Header åŒºåŸŸ
- æ·»åŠ äº†"å¯¼å‡ºå…¨éƒ¨"æŒ‰é’®ï¼ˆoutline æ ·å¼ï¼‰
- ä¸Ž"æ–°å»ºç¬”è®°"æŒ‰é’®å¹¶æŽ’
- æ— ç¬”è®°æ—¶è‡ªåŠ¨ç¦ç”¨

### é¢„è§ˆåŒºåŸŸ
- æ·»åŠ äº†"å¯¼å‡º"æŒ‰é’®
- ä½äºŽç¬”è®°æ ‡é¢˜å³ä¾§
- ä»…åœ¨æœ‰é€‰ä¸­ç¬”è®°æ—¶æ˜¾ç¤º

## âœ¨ ç‰¹æ€§äº®ç‚¹

1. **å®Œå…¨æµ‹è¯•é©±åŠ¨** - éµå¾ª TDD æœ€ä½³å®žè·µ
2. **100% æµ‹è¯•è¦†ç›–** - æ‰€æœ‰æ ¸å¿ƒå‡½æ•°éƒ½æœ‰æµ‹è¯•
3. **ç±»åž‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»åž‹
4. **ç”¨æˆ·ä½“éªŒ** - Toast åé¦ˆï¼ŒæŒ‰é’®çŠ¶æ€ç®¡ç†
5. **è¾¹ç•Œå¤„ç†** - ç©ºæ•°ç»„ã€é”™è¯¯å¤„ç†ã€å‰ªè´´æ¿æƒé™

## ðŸ“ ä»£ç ç¤ºä¾‹

### å¯¼å‡ºå·¥å…·å‡½æ•°
```typescript
// å•ç¬”è®°å¯¼å‡º
export function exportNoteAsMarkdown(note: Note): string {
  let markdown = `# ${note.title}\n\n`;
  markdown += `${note.content}\n\n`;

  if (note.tags && note.tags.length > 0) {
    markdown += `**æ ‡ç­¾**ï¼š`;
    markdown += note.tags.map(tag => `#${tag}`).join(' ');
    markdown += `\n`;
  }

  return markdown;
}

// å¤šç¬”è®°å¯¼å‡º
export function exportNotesAsMarkdown(notes: Note[]): string {
  if (notes.length === 0) return '';

  return notes
    .map((note, index) => {
      const markdown = exportNoteAsMarkdown(note);
      return index < notes.length - 1 ? `${markdown}\n---\n` : markdown;
    })
    .join('\n');
}
```

### ä½¿ç”¨ç¤ºä¾‹
```typescript
import { exportNoteAsMarkdown, copyToClipboard } from '@/lib/utils/note-export';

// å¯¼å‡ºå•ç¬”è®°
const markdown = exportNoteAsMarkdown(selectedNote);
await copyToClipboard(markdown);

// å¯¼å‡ºæ‰€æœ‰ç¬”è®°
const allMarkdown = exportNotesAsMarkdown(notes);
await copyToClipboard(allMarkdown);
```

## ðŸŽ‰ æ€»ç»“

é€šè¿‡ä¸¥æ ¼çš„ TDD å·¥ä½œæµï¼Œæˆ‘ä»¬å®žçŽ°äº†ä¸€ä¸ªå¥å£®ã€å¯é ã€æ˜“ç»´æŠ¤çš„ç¬”è®°å¯¼å‡ºåŠŸèƒ½ã€‚æ‰€æœ‰ä»£ç éƒ½æœ‰å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼Œç¡®ä¿äº†è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚

### æˆæžœ
- âœ… 11 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
- âœ… 100% ä»£ç è¦†ç›–çŽ‡
- âœ… ç”Ÿäº§å°±ç»ª
- âœ… ç±»åž‹å®‰å…¨
- âœ… ç”¨æˆ·ä½“éªŒä¼˜ç§€
